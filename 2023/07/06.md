### 2023年7月6日（木）

## 取り組んだ課題一覧
- プログラミングに触れてみる(Progate)
  - SQL
    - SQL IV　【完了】
  - Ruby on Rails5
    - Ruby on Rails5 I~III
## わかったこと
- SQL
  - INSERT
      - テーブルにレコードを挿入する場合に使用する
      - `INSERT INTO テーブル名 (カラム名1, カラム名2, カラム名3…) VALUES(カラム名1にセットするデータ, カラム名2にセットするデータ, カラム名3にセットするデータ…);` のように記述する
      - idのカラムはINSERT時に自動でインクリメント（AUTO INCREMENT）されるので記述自体を省略しても問題ない
  - UPDATE
      - データを更新したいときに使用する
      - `UPDATE テーブル名 SET カラム名1 = セットしたい値, カラム名2 = セットしたい値… WHERE カラム名 = 対象のid;` のように記述する
      - 複数変更したいカラムがある場合、`,`(カンマ)で区切る
      - **WHEREで更新するレコードを指定しないとカラム内の全データが更新されてしまうので注意**
          - UPDATE実行後はデータを戻すことができないので。実行前に一度SELECTを実行して、操作するデータを確認する習慣をつけるとよい。
  - DELETE
      - レコードを削除したい場合に使用する
          - `DELETE FROM テーブル名 WHERE カラム名 = 削除したいレコードのID;` のように記述する
          - UPDATEと同様にクエリ実行後はレコードを元に戻すことができないので、SELECTでレコードを確認してから削除を行うように習慣付けたほうがいい
- Ruby on Rails5
  Ruby on Railsとは、、、Web アプリケーション開発のためのフレームワーク
  
  - `rails new アプリケーション名`
      - 入力したアプリケーション名と同名のフォルダが作成され、その中に開発に必要なフォルダやファイルが用意される
  - `rails server`
      - サーバを起動する
      - ブラウザで「localhost:3000」というURLにアクセスすると、railsの初期画面が表示される
  - `rails generate controller コントローラ名 アクション名`
      - `rails g controller～`のように省略して記述も可能
      - コントローラ名に記述したコントローラとそれに対応するファイルが自動で生成される
      - localhost:3000/home/top　でTOPページにアクセスできるようになる
  - view（ビュー）
      - ページの「見た目」を作るためのHTMLファイルのこと
      - ブラウザとRailsのやりとりの中で、Railsからビューが返され、ページが表示される
      - ビューはviewsフォルダの中に置かれる
  - controller（コントローラ）
      - ブラウザに返すビューをviewsフォルダの中から見つけ出す役割を担っている
          - アクションは、コントローラと同じ名前のビューフォルダから、アクションと同じ名前のHTMLファイルを探してブラウザに返している
      - `rails generate controller home top` のコマンド実行時にcontrollersフォルダ配下に「home_controller.rb」というファイルが作成される
      - 上記例であれば、ファイルの中にtopメソッドが追加される（コントローラにおいてのメソッドは「アクション」と呼ぶ）
  - routing（ルーティング）
      - 送信されたURLに対して「どのコントローラの、どのアクション」で処理するかを決める「対応表」のこと
      - ルーティング→コントローラ→ビューという順で処理が行われる
      - ルーティングは「config/routes.rb」に定義され、`get "URL" => "コントローラー名#アクション名`のように記述する
      - データベースに変更を加えるような場合は `post` を使用する
  - cssファイル
      - app/assets/stylesheets　に置かれる
      - `rails generate controller...`コマンドを実行したときに、CSSファイル(home.scss)も自動生成される
      - 「stylesheets」フォルダの中に保存されているCSSファイルにコードを書けば、すべてのビューにCSSが適用され
  - 画像
      - 「public」フォルダに配置する
      - htmlの場合は`<img src="/画像名" >`で、cssの場合は`background-image: url("/画像名");`で画像を表示できる
  - `<% %>`
      - erb（Embedded Ruby（埋め込みRuby）の略）形式のファイルは`<% %>` で囲むことで、HTMLファイルの中にRubyのコードを記述できる？
      - ビューで使う変数はコントローラで定義するのが一般的なので出番はない
  - `<%= %>`
      - 埋め込むRubyコードをブラウザに表示したい場合に使用する
      - <% %>で変数定義して`<%= %>` で表示する、みたいな使い方
  - `@`
      - コントローラ側で変数名を`@`から始めることでこの変数は特殊な変数となり、ビューファイルでも使用することができるようになる
  - マイグレーションファイル
      - データベースに変更を指示するためのファイル
      - `rails g model テーブル名（モデル名） カラム名:データ型` のように記述するとマイグレーションファイルを作成できる
      - db/migrateフォルダの下にマイグレーションファイルが作成される
      - `rails db:migrate` ****のコマンド実行でマイグレーションファイルに記載されたコードが実行される
          - 実行後ApplicationRecordクラスを継承するクラス作成される（モデルと呼ばれる）
      - データベースに反映されていないマイグレーションファイルが存在する状態で、どこかのページにアクセスすると以下のようなマイグレーションエラーが発生する
          - マイグレーションファイルを作成した場合は必ず`rails db:migrate`を実行すること！
  - rails console
      - Ruby のコードを手軽に実行できる環境
      - ターミナル上で`rails console`を実行すると起動できる
      - `quit`でコンソール終了
  - テーブルへのデータ追加手順
      - `new` メソッドで 対象のモデルのインスタンスを作成
          - `インスタンス変数 = モデル.new(カラム名:セットするデータ)`
      - 対象のテーブルに保存（seveメソッド）
          - `インスタンス変数.seve`
  - テーブルからのデータ取得手順
      - `モデル.first` で対象のテーブルにある最初のレコードを取得（すべてのレコードを取得する場合は`モデル.all` で配列の形式でデータ取得可能）
      - `インスタンス変数.カラム名`で最初内容を取得できる
  - レイアウトの共通化
      - 共通のHTMLはviews/layouts/application.html.erb　に書く
          - 本ファイル内の`<%= yield %>` に他のビューファイルが代入され、application.html.erbの一部としてブラウザに表示される
  - `link_to`メソッド
      - <a>タグを作成できる（Rubyコードなので、`<%=%>` で囲むこと）
      - `<%= link to(”表示する文字”, “URL”) %>` のように記述する
  - `find_by`メソッド
      - ある条件に合致するデータを取得することができる
      - `モデル名.find_by(カラム名: 値)`のように記述する
  - URLにidを含める
      - ルーティングのURL部分に`:` を用いて`hoge/:id` とすることで、`hoge/1` でも`hoge/`2でも指定したアクションに行くようにすることができる
      - 本記載をする場合、上記例でいうと`hoge/index`よりも下に記載する必要がある（ルーティングは合致するURLを上から順に探すため）
      
      ```ruby
      :
      get "hoge/index" => "hoge#index"
      get "hoge:id" => "hoge#hogehoge"
      ```
      
  - `params`
      - ルーティングで設定したURLの`:id`は`params`という変数にハッシュとして入っている
      - `params[:id]` と記述することで取得可能
  - form_tagメソッド
      - フォームに入力されたデータを送信することができる
      - `form_tag(送信先のURL) do`のように記述する
          - トリガーは`<input type="submit" ...>`のボタンを押下時
  - redirect_toメソッド
      - 他のURLに転送（リダイレクト）させる
      - `redirect_to(URL)`のように記述する
  - orderメソッド
      - 取得した情報の並び替えが可能
      - `order(カラム名: 並び替えの順序（:desc or :asc　※コロンも含むことに注意））`のように記述する
## 次やること
- プログラミングに触れてみる(Progate)
  - Ruby on Rails5
    - Ruby on Rails5 I(道場レッスン)
## 感じたこと
rails何をどこに（view?controller?routing?）書くのか、がまだ定着していない気がする。
いったんここまで学んだことを次の道場レッスンで復習できるので、その中で定着できるように心がけていきたい
## 学習時間
- Today: 4.5h
- Total: 27.25h
